<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>SwitchBot Dashboard</title>
    <link rel="stylesheet" href="style.css?v=1.8">
    <!-- Google Fonts for Clock and UI -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Noto+Sans+JP:wght@300;400;700&display=swap"
        rel="stylesheet">
</head>

<body>
    <div class="background" id="bg-image"></div>
    <div class="background-overlay"></div>

    <div class="container">
        <!-- Dashboard Header (Clock, Weather, Calendar) -->
        <header class="dashboard-header">
            <!-- Clock Section -->
            <div class="header-card clock-card">
                <div id="time" class="time"></div>
                <div id="date" class="date"></div>
                <!-- Update Timer Display -->
                <div id="update-status"></div>
            </div>

            <!-- Weather Section -->
            <div id="weather-widget" class="header-card weather-card">
                <div class="weather-loading">üå§Ô∏è</div>
            </div>

            <!-- Calendar Section -->
            <div id="calendar-widget" class="header-card calendar-card">
                <div class="widget-title">üìÖ Calendar</div>
                <div id="calendar-grid" class="calendar-grid"></div>
            </div>
        </header>

        <!-- Secondary Widgets (Memo, System, Pomodoro) -->
        <div id="secondary-widgets" class="widget-row">
            <!-- Memo Widget -->
            <div class="widget-card memo-card" id="widget-memo">
                <div class="widget-title">üìù Quick Memo</div>
                <textarea id="memo-input" placeholder="Ë≤∑„ÅÜ„ÇÇ„ÅÆ„É™„Çπ„Éà..."></textarea>
            </div>

            <!-- System Monitor Widget -->
            <div class="widget-card system-card" id="widget-system">
                <div class="widget-title">üíª System Info</div>
                <div class="system-stats">
                    <div class="stat-row">
                        <span>CPU</span>
                        <div class="progress-bar">
                            <div id="cpu-bar" class="progress-fill" style="width: 0%"></div>
                        </div>
                        <span id="cpu-text">--%</span>
                    </div>
                    <div class="stat-row">
                        <span>MEM</span>
                        <div class="progress-bar">
                            <div id="mem-bar" class="progress-fill" style="width: 0%"></div>
                        </div>
                        <span id="mem-text">--%</span>
                    </div>
                </div>
            </div>

            <!-- Pomodoro Widget -->
            <div class="widget-card pomodoro-card" id="widget-pomodoro">
                <div class="widget-title">üçÖ Focus Timer</div>
                <div class="timer-display" id="pomodoro-timer">25:00</div>
                <div class="timer-controls">
                    <button id="pomo-start">‚ñ∂</button>
                    <button id="pomo-reset">‚Ü∫</button>
                    <input type="number" id="pomo-work-time" value="25" min="1" max="60" title="‰ΩúÊ•≠ÊôÇÈñì(ÂàÜ)">
                </div>
            </div>
        </div>

        <!-- Scrollable Content Area -->
        <div id="dashboard-content" class="dashboard-content">
            <!-- Favorites Section -->
            <div id="pinned-section" class="section hidden">
                <h2 class="section-title">„ÅäÊ∞ó„Å´ÂÖ•„Çä üåü</h2>
                <div id="pinned-grid" class="devices-grid"></div>
            </div>

            <!-- Main Devices Section -->
            <div id="main-section" class="section">
                <div id="devices-container">
                    <div id="devices-grid" class="devices-grid">
                        <div class="loading-message">„Éá„Éê„Ç§„Çπ„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer Controls -->
        <div class="footer-controls">
            <button id="refresh-btn" title="Êõ¥Êñ∞">‚Üª</button>
            <button id="settings-btn" title="Ë®≠ÂÆö">‚öôÔ∏è</button>
        </div>

    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <h2>Ë®≠ÂÆö</h2>
            <div class="form-group">
                <label for="api-token">Token</label>
                <input type="password" id="api-token" placeholder="SwitchBot API Token">
            </div>
            <div class="form-group">
                <label for="client-secret">Client Secret</label>
                <input type="password" id="client-secret" placeholder="SwitchBot Client Secret">
            </div>

            <div class="form-group">
                <label>Êé•Á∂ö„É¢„Éº„Éâ</label>
                <div class="mode-toggle">
                    <label class="toggle-option">
                        <input type="radio" name="connection-mode" value="direct" id="mode-direct">
                        <span class="toggle-label">üîå Êã°ÂºµÊ©üËÉΩ„É¢„Éº„Éâ<small>ChromeÊã°Âºµ„Å®„Åó„Å¶‰ΩøÁî®</small></span>
                    </label>
                    <label class="toggle-option">
                        <input type="radio" name="connection-mode" value="proxy" id="mode-proxy" checked>
                        <span class="toggle-label">üåê „Éñ„É©„Ç¶„Ç∂„É¢„Éº„Éâ<small>„Éó„É≠„Ç≠„Ç∑ÁµåÁî±„ÅßÊé•Á∂ö</small></span>
                    </label>
                </div>
            </div>

            <div class="form-group">
                <label>Â§ñË¶≥Ë®≠ÂÆö</label>
                <div class="settings-options">
                    <div class="setting-row">
                        <span>„Çø„Ç§„É´„Çµ„Ç§„Ç∫</span>
                        <select id="tile-size">
                            <option value="small">Â∞è</option>
                            <option value="medium" selected>‰∏≠</option>
                            <option value="large">Â§ß</option>
                        </select>
                    </div>
                    <div class="setting-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="show-icons" checked>
                            <span>„Ç¢„Ç§„Ç≥„É≥„ÇíË°®Á§∫</span>
                        </label>
                    </div>
                    <div class="setting-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="show-details" checked>
                            <span>Ë©≥Á¥∞ÊÉÖÂ†±„ÇíË°®Á§∫</span>
                        </label>
                    </div>
                    <div class="setting-row">
                        <span>Ëá™ÂãïÊõ¥Êñ∞ÈñìÈöî</span>
                        <select id="refresh-interval">
                            <option value="15">15Áßí</option>
                            <option value="30" selected>30Áßí</option>
                            <option value="60">1ÂàÜ</option>
                            <option value="300">5ÂàÜ</option>
                            <option value="0">„Ç™„Éï</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="hidden-devices-container" class="form-group">
                <label>„Éá„Éê„Ç§„ÇπË°®Á§∫Ë®≠ÂÆö</label>
                <div id="device-visibility-list" class="device-list"></div>
            </div>

            <div class="form-group">
                <label>„Ç¶„Ç£„Ç∏„Çß„ÉÉ„ÉàË°®Á§∫Ë®≠ÂÆö</label>
                <div class="settings-options">
                    <div class="setting-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="show-memo" checked>
                            <span>üìù „É°„É¢Â∏≥</span>
                        </label>
                    </div>
                    <div class="setting-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="show-system" checked>
                            <span>üíª „Ç∑„Çπ„ÉÜ„É†ÊÉÖÂ†±</span>
                        </label>
                    </div>
                    <div class="setting-row">
                        <label class="checkbox-label">
                            <input type="checkbox" id="show-pomodoro" checked>
                            <span>üçÖ „Éù„É¢„Éâ„Éº„É≠</span>
                        </label>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button id="save-settings-btn" class="primary-btn">‰øùÂ≠ò</button>
                <button id="close-settings-btn" class="secondary-btn">„Ç≠„É£„É≥„Çª„É´</button>
            </div>
        </div>
    </div>

    <script src="wallpaper.js"></script>
    <script src="script.js?v=1.8"></script>
</body>

</html>